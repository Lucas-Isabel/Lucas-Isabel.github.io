<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Simulação de Rendimentos</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: right; }
    th { background-color: #f4f4f4; }
    input { width: 100px; margin-right: 10px; }
    label { margin-right: 5px; }
</style>
</head>
<body>
<h2>Simulação de Rendimentos</h2>

<div>
    <label>Valor Inicial: R$</label><input type="number" id="valorInicial" value="1000"><br><br>
    <label>Valor Retirado/Mês: R$</label><input type="number" id="valorRetirado" value="100"><br><br>
    <label>SELIC (% a.a.):</label><input type="number" id="selic" value="12"><br><br>
    <label>CDI Cliente (%):</label><input type="number" id="cdiCliente" value="105"><br><br>
    <label>CDI Meu (%):</label><input type="number" id="cdiMeu" value="115"><br><br>
    <button onclick="gerarTabela()">Gerar Tabela</button>
</div>

<table id="tabelaResultado">
    <thead>
        <tr>
            <th>Mês</th>
            <th>Saldo Inicial</th>
            <th>Rend. (SELIC)</th>
            <th>Rend. p/ Cliente</th>
            <th>Lucro do Spread</th>
            <th>Saque Parcela</th>
            <th>Saldo Final</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
    <tfoot>
        <tr>
            <td colspan="2">Soma</td>
            <td id="somaRendimentoSelic"></td>
            <td id="somaRendimentoCliente"></td>
            <td id="somaSpread"></td>
            <td id="somaSaque"></td>
            <td id="saldoResidual"></td>
        </tr>
    </tfoot>
</table>

<script>
function gerarTabela() {
    const valorInicial = parseFloat(document.getElementById('valorInicial').value);
    const valorRetirado = parseFloat(document.getElementById('valorRetirado').value);
    const selicAnual = parseFloat(document.getElementById('selic').value);
    const cdiCliente = parseFloat(document.getElementById('cdiCliente').value) / 100;
    const cdiMeu = parseFloat(document.getElementById('cdiMeu').value) / 100;

    // Converte para rendimento mensal aproximado
    const selicMensal = Math.pow(1 + selicAnual / 100, 1/12) - 1;
    const rendClienteMensal = selicMensal * cdiCliente;
    const rendMeuMensal = selicMensal * cdiMeu;

    const tbody = document.querySelector("#tabelaResultado tbody");
    tbody.innerHTML = "";

    let saldo = valorInicial;
    let somaRendSelic = 0;
    let somaRendCliente = 0;
    let somaSpread = 0;
    let somaSaque = 0;

    for(let mes = 1; mes <= 12; mes++) {
        const rendSelic = saldo * rendMeuMensal;
        const rendCliente = saldo * rendClienteMensal;
        const lucroSpread = rendSelic - rendCliente;

        const saldoFinal = saldo + rendSelic - valorRetirado;

        somaRendSelic += rendSelic;
        somaRendCliente += rendCliente;
        somaSpread += lucroSpread;
        somaSaque += valorRetirado;

        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${mes}</td>
            <td>${saldo.toFixed(2)}</td>
            <td>${rendSelic.toFixed(2)}</td>
            <td>${rendCliente.toFixed(2)}</td>
            <td>${lucroSpread.toFixed(2)}</td>
            <td>${valorRetirado.toFixed(2)}</td>
            <td>${saldoFinal.toFixed(2)}</td>
        `;
        tbody.appendChild(tr);

        saldo = saldoFinal;
    }

    document.getElementById("somaRendimentoSelic").textContent = somaRendSelic.toFixed(2);
    document.getElementById("somaRendimentoCliente").textContent = somaRendCliente.toFixed(2);
    document.getElementById("somaSpread").textContent = somaSpread.toFixed(2);
    document.getElementById("somaSaque").textContent = somaSaque.toFixed(2);
    document.getElementById("saldoResidual").textContent = saldo.toFixed(2);
}
</script>
</body>
</html>
